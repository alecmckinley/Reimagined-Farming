package me.alecmckinley.reimaginedfarming;
import com.gmail.filoghost.holographicdisplays.api.Hologram;
import org.bukkit.Bukkit;
import org.bukkit.Location;
import org.bukkit.Material;
import org.bukkit.entity.Player;
import org.bukkit.event.EventHandler;
import org.bukkit.event.Listener;
import org.bukkit.event.player.PlayerInteractEvent;
import org.bukkit.plugin.java.JavaPlugin;
import java.io.File;
public class ReimaginedFarming extends JavaPlugin implements Listener {
 
 
    public Hologram hologram;
 
    private File workingDir;
 
    public void onEnable() {
        workingDir = getDataFolder();
        workingDir.mkdirs();
 
        getLogger().info(getDescription().getName() + " has been enabled");
        Bukkit.getServer().getPluginManager().registerEvents(this, this);
    }
 
    public void onDisable() {
        getLogger().info(getDescription().getName() + " has been disabled");
    }
 
    @EventHandler
    public void PlayerInteract(PlayerInteractEvent e) {
 
        Player p = e.getPlayer();
 
        if (e.getClickedBlock().getType() == Material.SOIL) {
            System.out.println("Yep that's soil");
            if (PlantTypes.fromName(e.getItem().getType().name()) != null) {
                System.out.println("Yep that's soil 2");
                Material seed = e.getItem().getType();
                Location plotLocation = e.getClickedBlock().getLocation();
                FarmPlot plot = new FarmPlot(plotLocation, System.currentTimeMillis());
                FileUtils.writeJSON(plot.getData(), new File(workingDir, plot.getUUID().toString() + ".json"));
            }
        }
        return;
 
        // /Check Duration
        /*
        if ((e.getItem().getType() == Material.IRON_HOE)) {
            if (e.getAction() == Action.RIGHT_CLICK_BLOCK) {
                if (e.getClickedBlock().getType() == Material.SOIL) {
 
                    double farmLocationX = e.getClickedBlock().getX();
                    double farmLocationY = e.getClickedBlock().getY();
                    double farmLocationZ = e.getClickedBlock().getZ();
                    farmLocationY += 3;
                    farmLocationX += 0.5;
                    farmLocationZ += 0.5;
                    Location farmLocation = new Location(e.getClickedBlock().getLocation().getWorld(), farmLocationX, farmLocationY, farmLocationZ);
 
                    hologram = HologramsAPI.createHologram(this, farmLocation);
 
                    String text = "Welcome to MERICA!";
                    hologram.appendTextLine(text);
 
                    this.getServer().getScheduler().scheduleSyncDelayedTask(this, new Runnable() {
                        public void run() {
 
                            hologram.delete();
 
                        }
                    }, 60L);
 
 
                    return;
                }
                */
    }
}
